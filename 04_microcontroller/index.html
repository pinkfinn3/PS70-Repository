<!DOCTYPE html>
<html lang="en">

<title>PS70: Intro to Digital Fabrication </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="../style.css" rel="stylesheet">


<nav class="navbar navbar-expand-sm navbar-dark" style="background-color: #130F1D; color: #EEE7E8;">
  <div style="align-items: center; justify-content: center;" class="container-fluid">
    <div class="flexrow">
      <h2 class="nav-title">PS70 // Intro to Digital Fabrication // F23</h2>
    </div>
    <div class="navbar-nav">
      <h4><a class="nav-link" href="../index.html">Home</a></h4>
      <h4><a class="nav-link" href="../about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>
<xmp style="display:none;">
<div class="textcontainer">
<p class="margin">   </p>

<h3>Week 4: Microcontroller Programming</h3>

<p class="margin">   </p>
<div class="flexrow">
  <a id="btn" href="wk4.zip" download>Download my code and CAD files from this week!
  </a>
</div>
<p class="margin">   </p>

<h4>Assignment: Make an Arduino Do Something</h4>

I will be working with blinking, remote controlled LEDs for my final project so I decided it would be a good use of time to program a simple LED circut with an artistic flare. For this week's project, I built an "LED wave" using the Millis() function. My final project is going to need its LED pattern to operate independently of the rest of the code, so I needed to understand how this function works to avoid using the delay command in the future. 

<p class="margin">   </p>
<div class="flexrow">
  <img src="./Tinkercad.jpeg" alt="Circut Design">
</div>
<p class="caption">The re-designed cardboard stand, including notches at the bottom for a shelf to hold the motor.</p>

I modeled the circuit using TinkerCad's Arduino module. This took about 1.5 hours testing different code files, playing with timings, and trying different resistors and wiring diagrams. This allowed me to similtaneously debug the circuitboard and the code seamlessly.

<p class="margin">   </p>
<div class="flexrow">
  <img src="./panthergif.gif" alt="a cardboard panther that looks like it's running">
</div>
<p class="caption">It lives!</p>

I decided to use as many pins and lights as possible, which I hoped wouldn't be too much for the board to handle. This is the code I loaded onto the board to activate my board.

<pre><code style="background-color: #2d2b33;">
const int numLEDs = 10;
const int ledPins[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
const int onDuration = 500;  // Time in milliseconds to keep the LEDs on
const int offDuration = 500; // Time in milliseconds to keep the LEDs off

unsigned long previousMillis = 0;
int currentLED = 0;

void setup() {
  // Initialize the LED pins as OUTPUT
  for (int i = 0; i < numLEDs; i++) {
    pinMode(ledPins[i], OUTPUT);
  }
}

void loop() {
  // Get the current time
  unsigned long currentMillis = millis();

  // Check if it's time to turn off the current LED
  if (currentMillis - previousMillis >= onDuration) {
    digitalWrite(ledPins[currentLED], LOW); // Turn off the current LED
    previousMillis = currentMillis; // Save the current time
    currentLED++; // Move to the next LED

    // Check if all LEDs have been cycled through
    if (currentLED >= numLEDs) {
      currentLED = 0; // Restart from the first LED
    }
  }

  // Check if it's time to turn on the next LED
  if (currentMillis - previousMillis >= offDuration) {
    digitalWrite(ledPins[currentLED], HIGH); // Turn on the current LED
  }
}

</code></pre>

I messed with the timings until the wave was visually appealing.

<p class="margin">   </p>
<div class="flexrow">
  <video controls>
    <source src="./panther-vid.mov" type="video/mp4">
  </video>
  </div>
<p class="caption">Potentiometer Speed Control.</p>

Lastly, I will most likely be using two ESP32s for my final project as I need radio control and potentially, WIFI. To get a head start, I installed the Arduino ESP32 add-on and familiarized myself with the interface.  

<p class="margin">   </p>
<div class="flexrow">
  <video controls>
    <source src="panther_nice.mov" type="video/mp4">
  </video>
  </div>
<p class="caption">The final result (so far).</p>

</div>
</xmp>
</body>

<script src="../strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" ></script>

</html>